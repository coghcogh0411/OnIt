<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>ìƒí’ˆ ë“±ë¡</title>
<link rel="stylesheet" href="/css/resalereg.css">
<script>
//ì „ì—­ ì´ë¯¸ì§€ ì¹´ìš´í„° (ì—…ë¡œë“œëœ ì´ ì´ë¯¸ì§€ ìˆ˜)
let imageCounter = 0;

function previewFiles() {
  // ë¯¸ë¦¬ë³´ê¸° ì»¨í…Œì´ë„ˆ (ì´ì „ì— ì¶”ê°€ëœ ë¯¸ë¦¬ë³´ê¸°ë“¤ì€ ìœ ì§€)
  const previewContainer = document.getElementById('previewContainer');
  // íŒŒì¼ ì…ë ¥ ìš”ì†Œ
  const fileInput = document.querySelector('input[name="files"]');
  const files = fileInput.files;

  // íŒŒì¼ì´ ì—†ìœ¼ë©´ ì¢…ë£Œ
  if (!files || files.length === 0) {
    return;
  }

  // íŒŒì¼ë“¤ì„ ìˆœíšŒí•˜ë©° ë¯¸ë¦¬ë³´ê¸° ì¶”ê°€
  Array.from(files).forEach(file => {
    const reader = new FileReader();
    reader.onload = e => {
      // ì´ë¯¸ì§€ ì¹´ìš´í„° ì¦ê°€ ë° ë²ˆí˜¸ í• ë‹¹
      imageCounter++;

      // ë¯¸ë¦¬ë³´ê¸° ì´ë¯¸ì§€ì™€ ë²ˆí˜¸ë¥¼ ê°ì‹¸ëŠ” ë˜í¼ ìƒì„±
      const imageWrapper = document.createElement('div');
      imageWrapper.classList.add('preview-wrapper');

      // ì´ë¯¸ì§€ ìˆœë²ˆì„ ë³´ì—¬ì¤„ ìš”ì†Œ ìƒì„±
      const numberLabel = document.createElement('div');
      numberLabel.classList.add('image-number');
      numberLabel.textContent = imageCounter; // ìˆœë²ˆ í‘œì‹œ

      // ì‹¤ì œ ì´ë¯¸ì§€ ìš”ì†Œ ìƒì„±
      const img = document.createElement('img');
      img.src = e.target.result;
      img.classList.add('preview-image');

      // ë˜í¼ì— ë²ˆí˜¸ì™€ ì´ë¯¸ì§€ë¥¼ ì¶”ê°€
      imageWrapper.appendChild(numberLabel);
      imageWrapper.appendChild(img);

      // ë¯¸ë¦¬ë³´ê¸° ì»¨í…Œì´ë„ˆì— ë˜í¼ ì¶”ê°€
      previewContainer.appendChild(imageWrapper);
    };
    reader.readAsDataURL(file);
  });

  // íŒŒì¼ ì…ë ¥ê°’ ì´ˆê¸°í™”(ê°™ì€ íŒŒì¼ ì¬ì„ íƒ ê°€ëŠ¥í•˜ê²Œ)
  fileInput.value = '';
}
</script>

</head>
<body>

	<div class="container">
		<div class="top-content">
			<button class="location-button">
				<span class="location-icon">ğŸ“</span> ì¢…ë¡œêµ¬
			</button>
			<div class="title-banner">ìƒí’ˆ ë“±ë¡</div>
		</div>

		<div class="main-content">
			<form class="form-container" action="/resale-reg" method="post"
				enctype="multipart/form-data">
				<div class="form-fields">
					<input type="text" name="title" class="input-field"
						placeholder="ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”">
					<textarea class="textarea-field" name="description"
						placeholder="ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”"></textarea>
					<div class="dropdowns-container">
						<select class="dropdown" name="category">
							<option value="">ì¹´í…Œê³ ë¦¬ ì„ íƒ</option>
							<th:block th:each="category : ${category}">
								<option th:value="${category.no}" th:text="${category.name}"></option>
							</th:block>
						</select> <select class="dropdown" name="delivery">
							<option>íƒë°° ì—¬ë¶€</option>
							<option value="Y">ê°€ëŠ¥</option>
							<option value="N">ë¶ˆê°€ëŠ¥</option>
						</select> <select class="dropdown" name="deal">
							<option>ì§ê±°ë˜ ì—¬ë¶€</option>
							<option value="Y">ê°€ëŠ¥</option>
							<option value="N">ë¶ˆê°€ëŠ¥</option>
						</select>
					</div>
				</div>

				<div class="image-section">
					<div class="upload-area">
						<span>ì´ë¯¸ì§€ë¥¼ ì˜¬ë ¤ì£¼ì„¸ìš”</span>
						<input type="file" name="files" accept="image/*" multiple
							onchange="previewFiles()">
					</div>

					<div class="preview-carousel" id="previewContainer">
					
					</div>

					<div class="price-section">
						<input type="text" class="price-input" name="price"
							placeholder="ê°€ê²© ì…ë ¥">
						<button type="submit" class="submit-button">ë“±ë¡</button>
					</div>
				</div>
			</form>
		</div>
	</div>
</body>

</html>
