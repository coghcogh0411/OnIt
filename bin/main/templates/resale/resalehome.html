<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link rel="stylesheet" href="/css/resalehome.css">

<script type="text/javascript" src="/js/jQuery.js"></script>
<script type="text/javascript" src="/js/move.js"></script>
<script type="text/javascript">
	$(function() {
		var isRotate = false;
		$(".floating-button").mouseup(function(e) {
			isRotate = !isRotate;
			if (isRotate) {
				$(".icon").css({
					"transform" : "rotate(-45deg)"
				});
				$(".sub-buttons").addClass("show");
			} else {
				$(".icon").css({
					"transform" : "rotate(0deg)"
				});
				$(".sub-buttons").removeClass("show");
			}
		})

		$(".location-button").on("click", function() {
	        $(".modal-overlay").fadeIn(200);
	    });

	    // ë‹«ê¸° ë²„íŠ¼ í´ë¦­ ì‹œ ëª¨ë‹¬ ë‹«ê¸°
	    $(".close-modal").on("click", function() {
	        $(".modal-overlay").fadeOut(200);
	    });
	    
	    $("#locationInput").keyup(function(){
	    	var region = $(this).val();
	    	$.getJSON("region.get?region="+region,function(regionData){
	    		console.log(regionData);
	    		$(".region-list").empty();
	    		$.each(regionData.region, function(index, item){
	    			console.log(item);
	    			$(".region-list").append("<li>" + item.firstName+", "+ item.secondName + "</li>");
	    		})
	    	}).fail(function() {
	    		console.log("Request failed");
	            $(".region-list").empty();
	            $(".region-list").append("<li>ì§€ì—­ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.</li>");
	        });
	    });
	});
</script>
</head>
<body>
	<div class="main-content">
		<div class="sidebar-container">
			<button class="location-button">ğŸ“ ë™í˜¸êµ¬</button>
			<div class="sidebar">
				<div th:each="c : ${category}"
					th:onclick="|resaleCategoryChange(${c.no})|">
					<div class="category-item" th:text="${c.name}"></div>
				</div>
			</div>
		</div>

		<div id="infoDiv">
			<div class="category-header"
				th:text="${categorytitle != null ? categorytitle.name + ' ì¹´í…Œê³ ë¦¬' : 'ëª¨ë“  ìƒí’ˆ'}">
			</div>
			<div class="product-grid">
				<a th:each="product : ${resaleList}"
					th:href="@{/resale-product(no=${product.no})}">
					<div class="product-card">
						<div class="product-image">
							<img
								th:src="${product.thumbnail != null ? '/HoMini/Img/' + product.thumbnail : '/img/no-image.png'}"
								alt="ì´ë¯¸ì§€" />
						</div>
						<div class="product-info" th:text="${product.title}">ì œí’ˆ ì´ë¦„</div>
						<div class="product-price" th:text="${product.price + ' ì›'}">ê°€ê²©</div>
					</div>
				</a>
			</div>
		</div>
	</div>
	<!-- ì—¬ê¸°ë¶€í„° ë“±ë¡ê´€ë ¨ ë²„íŠ¼ -->
	<div class="floating-button">
		<span class="icon">+</span>
		<div class="sub-buttons">
			<a href="/resale-go-reg" class="sub-button">ì¤‘ê³ ê±°ë˜ ë“±ë¡</a> <a
				href="/auction-go-reg" class="sub-button">ê²½ë§¤ ë“±ë¡</a>
		</div>
	</div>
	<!-- ìœ„ì¹˜í…Œì´ë¸” -->
	<div class="modal-overlay">
		<div class="modal">
			<div class="modal-header">
				ì§€ì—­ ë³€ê²½
				<span class="close-modal">âœ•</span>
			</div>
			<div class="modal-content">
				<div class="search-box">
					<input id="locationInput" type="text" placeholder="ì§€ì—­ì´ë‚˜ ë™ë„¤ë¡œ ê²€ìƒ‰í•˜ê¸°">
				</div>
				<button class="location-button">í˜„ì¬ ë‚´ ìœ„ì¹˜ ì‚¬ìš©í•˜ê¸°</button>
				<div class="recommend-title">ì¶”ì²œ</div>
				<ul class="region-list">
					<li>ì„œìš¸íŠ¹ë³„ì‹œ, ê°•ë‚¨êµ¬</li>
					<li>ì„œìš¸íŠ¹ë³„ì‹œ, ì†¡íŒŒêµ¬</li>
					<li>ê²½ê¸°ë„, ë¶€ì²œì‹œ</li>
					<li>ê²½ê¸°ë„, í™”ì„±ì‹œ</li>
					<li>ì„œìš¸íŠ¹ë³„ì‹œ, ê°•ì„œêµ¬</li>
					<li>ì¸ì²œê´‘ì—­ì‹œ, ì„œêµ¬</li>
					<li>ê²½ê¸°ë„, ë‚¨ì–‘ì£¼ì‹œ</li>
				</ul>
			</div>
		</div>
	</div>
</body>
</html>